machine:
  node:
    version: 7.10.0

dependencies:
  pre:
    - wget https://releases.hashicorp.com/terraform/0.9.11/terraform_0.9.11_linux_amd64.zip
    - unzip terraform_0.9.11_linux_amd64.zip
    - git submodule add https://github.com/rp4fx12/basic-ec2

test:
  override:
    - npm test

deployment:
  production:
    branch: master
    commands:
      - ls -a
      - cd basic-ec2
      - ls -a
      - ../terraform plan
      - ../terraform apply
